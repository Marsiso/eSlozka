@attribute [Route(Routes.Authentication.Login)]
@attribute [AllowAnonymous]
@using static Domain.Constants.Translations.Login
@using eSlozka.Domain.Constants
@inherits PageComponentBase<LoginViewModel>

@inject IStringLocalizer<App> Localizer

<MudBreakpointProvider>
    <MudHidden Breakpoint="Breakpoint.Xs" IsHiddenChanged="hidden => Model.HasMobileDeviceViewPortWidth = hidden">
    </MudHidden>
</MudBreakpointProvider>

<MudCard Class="pa-8" Style="@Model.GetComponentWidth()">
    <MudForm ValidationDelay="1000">
        <MudCardHeader>
            <MudText Color="Color.Surface" Typo="Typo.h5">@Localizer[Title]</MudText>
        </MudCardHeader>
        <MudCardContent>
            <MudTextField @bind-Value="Model.Form.Email"
                          For="@(() => Model.Form.Email)"
                          Immediate="true"
                          InputType="InputType.Email"
                          Label="@Localizer[EmailInput.Label]"
                          MaxLength="256"
                          Placeholder="@Localizer[EmailInput.Placeholder]"
                          DebounceInterval="500"
                          Error="@Model.HasError(nameof(Model.Form.Email))"
                          ErrorText="@Localizer[Model.GetResource(nameof(Model.Form.Email))]"/>

            <MudTextField Adornment="Adornment.End"
                          AdornmentAriaLabel="@Localizer[PasswordInput.AdornmentArialLabel]"
                          AdornmentIcon="@Model.PasswordInputIcon"
                          @bind-Value="Model.Form.Password"
                          For="@(() => Model.Form.Password)"
                          Immediate="true"
                          InputType="@Model.PasswordInputType"
                          Label="@Localizer[PasswordInput.Label]"
                          MaxLength="256"
                          OnAdornmentClick="@Model.OnPasswordInputShowPasswordClick"
                          DebounceInterval="500"
                          Error="@Model.HasError(nameof(Model.Form.Password))"
                          ErrorText="@Localizer[Model.GetResource(nameof(Model.Form.Password))]"/>
        </MudCardContent>
        <MudCardActions>
            <MudStack Class="flex flex-grow-1" Justify="Justify.FlexEnd" Row="true">
                <MudButton ButtonType="ButtonType.Button" Variant="Variant.Filled" OnClick="@Model.OnLoginButtonClick">@Localizer[LoginButton.Text]</MudButton>
                <MudButton ButtonType="ButtonType.Button" Variant="Variant.Text" OnClick="@Model.OnRegisterButtonClick">@Localizer[RegisterButton.Text]</MudButton>
            </MudStack>
        </MudCardActions>
    </MudForm>
</MudCard>