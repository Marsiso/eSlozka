@using eSlozka.Application.ViewModels
@using Microsoft.AspNetCore.Authorization
@attribute [AllowAnonymous]

@inject NavigationManager Navigation

@code
{
    [CascadingParameter]
    public required Task<AuthenticationState> AuthenticationStateTask { get; set; }

    protected override async Task OnInitializedAsync()
    {
        var authenticationState = await AuthenticationStateTask;
        var authenticated = authenticationState.User.Identity?.IsAuthenticated ?? false;

        if (!authenticated) Navigation.NavigateTo(Routes.Authentication.Login);
    }
}
